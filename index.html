<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (Demo + LocalStorage)</title>
  <style>
    body { font-family: sans-serif; margin: 20px; background: #f5f5f5; }
    h2 { margin-top: 40px; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; background: white; }
    th, td { border: 1px solid #ddd; padding: 8px; }
    th { background: #1976d2; color: white; text-align: left; }
    .btn { background: #1976d2; color: white; border: none; padding: 6px 12px; margin: 5px; cursor: pointer; border-radius: 4px; }
    .btn:hover { background: #0d47a1; }
    input, select { padding: 5px; margin: 5px; }
  </style>
</head>
<body>

  <h1>üìã ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (Demo + LocalStorage)</h1>

  <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ -->
  <h2>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</h2>
  <form id="addCustomerForm">
    <input type="text" name="customerName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤" required>
    <input type="text" name="companyName" placeholder="‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó">
    <input type="tel" name="phone" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£" required>
    <select name="serviceType" required>
      <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</option>
      <option value="fertilizer">‡∏Ç‡∏∂‡πâ‡∏ô‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏õ‡∏∏‡πã‡∏¢</option>
      <option value="chemical">‡∏Ç‡∏∂‡πâ‡∏ô‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ</option>
    </select>
    <button class="btn" type="submit">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</button>
  </form>

  <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ -->
  <table>
    <thead>
      <tr>
        <th>‡∏£‡∏´‡∏±‡∏™</th>
        <th>‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</th>
        <th>‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó</th>
        <th>‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</th>
        <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á</th>
      </tr>
    </thead>
    <tbody id="customersTable"></tbody>
  </table>

  <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ -->
  <h2>‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£</h2>
  <form id="uploadDocumentForm">
    <input type="text" name="documentName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£" required>
    <select name="customerId" required>
      <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</option>
    </select>
    <select name="documentType" required>
      <option value="certificate">‡πÉ‡∏ö‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç</option>
      <option value="application">‡πÉ‡∏ö‡∏Ñ‡∏≥‡∏Ç‡∏≠</option>
      <option value="license">‡πÉ‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï</option>
    </select>
    <button class="btn" type="submit">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î</button>
  </form>

  <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ -->
  <table>
    <thead>
      <tr>
        <th>‡∏£‡∏´‡∏±‡∏™</th>
        <th>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£</th>
        <th>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</th>
        <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
        <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î</th>
      </tr>
    </thead>
    <tbody id="documentsTable"></tbody>
  </table>

<script>
  // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å localStorage
  let customers = JSON.parse(localStorage.getItem("customers")) || [];
  let documents = JSON.parse(localStorage.getItem("documents")) || [];
  let customerCounter = parseInt(localStorage.getItem("customerCounter")) || 0;
  let documentCounter = parseInt(localStorage.getItem("documentCounter")) || 0;

  function saveData() {
    localStorage.setItem("customers", JSON.stringify(customers));
    localStorage.setItem("documents", JSON.stringify(documents));
    localStorage.setItem("customerCounter", customerCounter);
    localStorage.setItem("documentCounter", documentCounter);
  }

  function generateCustomerId() {
    customerCounter++;
    saveData();
    return "CUS-" + customerCounter.toString().padStart(4, "0");
  }

  function generateDocumentId() {
    documentCounter++;
    saveData();
    return "DOC-" + documentCounter.toString().padStart(4, "0");
  }

  // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
  document.getElementById("addCustomerForm").addEventListener("submit", function(e){
    e.preventDefault();
    const fd = new FormData(e.target);
    const customer = {
      id: generateCustomerId(),
      name: fd.get("customerName"),
      company: fd.get("companyName"),
      phone: fd.get("phone"),
      serviceType: fd.get("serviceType"),
      dateCreated: new Date().toLocaleDateString("th-TH")
    };
    customers.push(customer);
    saveData();
    renderCustomers();
    renderCustomerOptions();
    e.target.reset();
  });

  // ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£
  document.getElementById("uploadDocumentForm").addEventListener("submit", function(e){
    e.preventDefault();
    const fd = new FormData(e.target);
    const document = {
      id: generateDocumentId(),
      name: fd.get("documentName"),
      customerId: fd.get("customerId"),
      type: fd.get("documentType"),
      uploadDate: new Date().toLocaleDateString("th-TH")
    };
    documents.push(document);
    saveData();
    renderDocuments();
    e.target.reset();
  });

  // ‡πÅ‡∏™‡∏î‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á
  function renderCustomers() {
    const tbody = document.getElementById("customersTable");
    tbody.innerHTML = "";
    customers.forEach(c => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${c.id}</td>
        <td>${c.name}</td>
        <td>${c.company || "-"}</td>
        <td>${c.serviceType}</td>
        <td>${c.dateCreated}</td>
      `;
      tbody.appendChild(tr);
    });
  }

  // ‡πÅ‡∏™‡∏î‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô select ‡∏Ç‡∏≠‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£
  function renderCustomerOptions() {
    const sel = document.querySelector("select[name='customerId']");
    sel.innerHTML = '<option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</option>';
    customers.forEach(c=>{
      sel.innerHTML += `<option value="${c.name}">${c.name}</option>`;
    });
  }

  // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á
  function renderDocuments() {
    const tbody = document.getElementById("documentsTable");
    tbody.innerHTML = "";
    documents.forEach(d => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${d.id}</td>
        <td>${d.name}</td>
        <td>${d.customerId}</td>
        <td>${d.type}</td>
        <td>${d.uploadDate}</td>
      `;
      tbody.appendChild(tr);
    });
  }

  // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
  renderCustomers();
  renderCustomerOptions();
  renderDocuments();
</script>

</body>
</html>

